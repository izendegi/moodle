"use strict";(function(root,factory){if(typeof define==="function"&&define.amd){define("pdfjs-web/annotation_layer_builder",["exports","pdfjs-web/ui_utils","pdfjs-web/pdf_link_service","pdfjs-web/pdfjs"],factory)}else if(typeof exports!=="undefined"){factory(exports,require("./ui_utils.js"),require("./pdf_link_service.js"),require("./pdfjs.js"))}else{factory(root.pdfjsWebAnnotationLayerBuilder={},root.pdfjsWebUIUtils,root.pdfjsWebPDFLinkService,root.pdfjsWebPDFJS)}})(this,function(exports,uiUtils,pdfLinkService,pdfjsLib){var mozL10n=uiUtils.mozL10n;var SimpleLinkService=pdfLinkService.SimpleLinkService;var AnnotationLayerBuilder=function AnnotationLayerBuilderClosure(){function AnnotationLayerBuilder(options){this.pageDiv=options.pageDiv;this.pdfPage=options.pdfPage;this.linkService=options.linkService;this.downloadManager=options.downloadManager;this.div=null}AnnotationLayerBuilder.prototype={render:function AnnotationLayerBuilder_render(viewport,intent){var self=this;var parameters={intent:intent===undefined?"display":intent};this.pdfPage.getAnnotations(parameters).then(function(annotations){viewport=viewport.clone({dontFlip:true});parameters={viewport:viewport,div:self.div,annotations:annotations,page:self.pdfPage,linkService:self.linkService,downloadManager:self.downloadManager};if(self.div){pdfjsLib.AnnotationLayer.update(parameters)}else{if(annotations.length===0){return}self.div=document.createElement("div");self.div.className="annotationLayer";self.pageDiv.appendChild(self.div);parameters.div=self.div;pdfjsLib.AnnotationLayer.render(parameters);if(typeof mozL10n!=="undefined"){mozL10n.translate(self.div)}}})},hide:function AnnotationLayerBuilder_hide(){if(!this.div){return}this.div.setAttribute("hidden","true")}};return AnnotationLayerBuilder}();function DefaultAnnotationLayerFactory(){}DefaultAnnotationLayerFactory.prototype={createAnnotationLayerBuilder:function(pageDiv,pdfPage){return new AnnotationLayerBuilder({pageDiv:pageDiv,pdfPage:pdfPage,linkService:new SimpleLinkService})}};exports.AnnotationLayerBuilder=AnnotationLayerBuilder;exports.DefaultAnnotationLayerFactory=DefaultAnnotationLayerFactory});