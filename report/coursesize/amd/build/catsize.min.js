define("report_coursesize/catsize",["exports","jquery","core/str","core/templates","core/url"],(function(_exports,_jquery,_str,_templates,_url){var obj;
/**
   * Javascript to handle report_coursesize actions.
   *
   * @copyright  Copyright (c) 2021 Open LMS (https://www.openlms.net)
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_jquery=(obj=_jquery)&&obj.__esModule?obj:{default:obj};const Selectors_catToggle=".cattoggle",Selectors_courseToggle=".coursetoggle";_exports.init=(sortorder,sortdir,displaysize,excludebackups)=>{const expander=(type,id)=>{const selector="cat"==type?Selectors_catToggle:Selectors_courseToggle;"block"==document.getElementById(type+id).style.display?(document.getElementById(type+id).style.display="none",(0,_str.get_string)("tdtoggle","report_coursesize").then((function(string){(0,_templates.renderPix)("t/switch_plus","core",string).then((function(pix){(0,_jquery.default)(selector+"[data-id="+id+"]").html(pix)}))}))):""==document.getElementById(type+id).innerHTML?(0!=id&&(0,_str.get_string)("loading","core").then((function(string){(0,_templates.renderPix)("i/loading","core",string).then((function(pix){(0,_jquery.default)(selector+"[data-id="+id+"]").html(pix)}))})),_jquery.default.ajax({type:"GET",url:(0,_url.relativeUrl)("/report/coursesize/callback.php"),data:{id:id,course:"cat"==type?0:1,sorder:sortorder,sdir:sortdir,display:displaysize,excludebackups:excludebackups}}).done((function(data){document.getElementById(type+id).innerHTML=data,document.getElementById(type+id).style.display="block",0!=id&&(0,_str.get_string)("tdtoggle","report_coursesize").then((function(string){(0,_templates.renderPix)("t/switch_minus","core",string).then((function(pix){(0,_jquery.default)(selector+"[data-id="+id+"]").html(pix)}))}))}))):(document.getElementById(type+id).style.display="block",0!=id&&(0,_str.get_string)("tdtoggle","report_coursesize").then((function(string){(0,_templates.renderPix)("t/switch_minus","core",string).then((function(pix){(0,_jquery.default)(selector+"[data-id="+id+"]").html(pix)}))})))};expander("cat",0),document.addEventListener("click",(e=>{var target=e.target;return void 0===(0,_jquery.default)(target).attr("data-id")&&(target=e.target.parentNode),e.target.closest(Selectors_catToggle)?(e.preventDefault(),void expander("cat",target.getAttribute("data-id"))):e.target.closest(Selectors_courseToggle)?(e.preventDefault(),void expander("course",target.getAttribute("data-id"))):void 0}))}}));

//# sourceMappingURL=catsize.min.js.map