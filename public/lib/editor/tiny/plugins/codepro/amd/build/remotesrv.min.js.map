{"version":3,"file":"remotesrv.min.js","sources":["../src/remotesrv.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Tiny WidgetHub plugin.\n * Include all calls to core/ajax here.\n *\n * @module      tiny_widgethub/plugin\n * @copyright   2025 Josep Mulet Pol <pep.mulet@gmail.com>\n * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n/** @ts-ignore */\nimport { call as fetchMany } from 'core/ajax';\n\nexport class RemoteService {\n    static USER_PREFS_KEY = 'tiny_codepro_userprefs';\n    /**\n     *\n     * @param {string} serviceName\n     * @param {object} args\n     * @returns Promise<any>\n     */\n    _fetch(serviceName, args) {\n        /** @ts-ignore */\n        return fetchMany([{\n            methodname: serviceName,\n            args: args,\n        }])[0];\n    }\n    /**\n     *\n     * @param {string} userPrefs\n     * @returns Promise<boolean>\n     */\n    async saveUserPref(userPrefs) {\n        try {\n            await this._fetch('core_user_update_user_preferences', {\n                preferences: [\n                    {\n                        type: RemoteService.USER_PREFS_KEY,\n                        value: userPrefs,\n                    }\n                ]\n            });\n            return true;\n        } catch (e) {\n            return false;\n        }\n    }\n}\n\n\n/**\n * @type {RemoteService | null}\n */\nlet instance = null;\n/**\n * @returns {RemoteService}\n */\nexport function getRemoteService() {\n    if (!instance) {\n        instance = new RemoteService();\n    }\n    return instance;\n}"],"names":["instance","RemoteService","_fetch","serviceName","args","methodname","userPrefs","this","preferences","type","USER_PREFS_KEY","value","e"],"mappings":"6MAwESA,WACDA,SAAW,IAAIC,sBAEZD;;;;;;;;;MAjDEC,oCACe,yBAOxBC,OAAOC,YAAaC,aAET,cAAU,CAAC,CACdC,WAAYF,YACZC,KAAMA,QACN,sBAOWE,4BAELC,KAAKL,OAAO,oCAAqC,CACnDM,YAAa,CACT,CACIC,KAAMR,cAAcS,eACpBC,MAAOL,eAIZ,EACT,MAAOM,UACE,6CASfZ,SAAW"}